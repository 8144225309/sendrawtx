<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Error - sendrawtx</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background:#0f0f0f;color:#e0e0e0;min-height:100vh;display:flex;flex-direction:column;
  line-height:1.6;
}
a{color:#f7931a;text-decoration:none}
a:hover{text-decoration:underline}
code,.mono{font-family:'SF Mono',Consolas,'Liberation Mono',Menlo,monospace}
.container{max-width:1152px;margin:0 auto;padding:0 16px;width:100%}
@media(min-width:640px){.container{padding:0 24px}}

/* Header */
.header{position:sticky;top:0;z-index:50;background:rgba(15,15,15,.95);backdrop-filter:blur(8px);border-bottom:1px solid #1a1a1a}
.header-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
.logo-link{display:flex;align-items:center;gap:8px}
.logo-link:hover{text-decoration:none}
.site-name{font-size:18px;font-weight:700;color:#fff;font-family:'SF Mono',Consolas,monospace}
.logo-link:hover .site-name{color:#f7931a}
nav{display:flex;align-items:center;gap:4px}
.nav-link{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:8px;font-size:14px;font-weight:500;color:#a0a0a0;transition:all .15s}
.nav-link:hover{color:#fff;background:#1a1a1a;text-decoration:none}
.nav-link.active{color:#fff;background:#1a1a1a}
.nav-label{display:none}
@media(min-width:640px){.nav-label{display:inline}}

/* Error content */
.error-center{display:flex;align-items:center;justify-content:center;flex:1;padding:48px 16px}
.error-card{max-width:560px;width:100%;text-align:center}
.error-icon{margin:0 auto 24px}
.error-title{font-size:24px;font-weight:700;color:#fff;margin-bottom:8px}
.error-subtitle{color:#a0a0a0;font-size:14px;margin-bottom:24px}

.error-box{
  background:#1a1a1a;border:1px solid #333;border-radius:8px;
  padding:16px;margin-bottom:24px;text-align:left;
}
.error-code{color:#666;font-size:12px;margin-bottom:8px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}
.error-message{color:#e0e0e0;font-size:14px;line-height:1.6}
.error-detail{color:#888;font-size:12px;margin-top:8px;font-family:'SF Mono',Consolas,monospace;word-break:break-all}

.help-section{
  background:#1a1a1a;border:1px solid #333;border-radius:8px;
  padding:16px;margin-bottom:24px;text-align:left;
}
.help-title{color:#f7931a;font-size:14px;font-weight:600;margin-bottom:12px}
.help-item{margin-bottom:12px}
.help-item:last-child{margin-bottom:0}
.help-label{color:#a0a0a0;font-size:13px;font-weight:600;margin-bottom:4px}
.help-code{
  display:block;background:#252525;border:1px solid #333;border-radius:4px;
  padding:8px 12px;font-family:'SF Mono',Consolas,monospace;font-size:12px;
  color:#4ade80;word-break:break-all;
}
.help-note{color:#666;font-size:11px;margin-top:2px}

.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;transition:all .15s}
.btn-primary{background:#f7931a;color:#000}
.btn-primary:hover{background:#e8850f;text-decoration:none}
.btn-muted{background:#1a1a1a;color:#a0a0a0;border:1px solid #333}
.btn-muted:hover{color:#fff;background:#252525;text-decoration:none}

/* Footer */
.footer{margin-top:auto;border-top:1px solid #1a1a1a;background:#0f0f0f;padding:32px 0}
.footer-inner{display:flex;flex-direction:column;align-items:center;gap:16px}
@media(min-width:640px){.footer-inner{flex-direction:row;justify-content:space-between}}
.footer-links{display:flex;align-items:center;gap:16px}
.footer-link{display:flex;align-items:center;gap:8px;font-size:14px;color:#a0a0a0;transition:color .15s}
.footer-link:hover{color:#fff;text-decoration:none}
.footer-credit{font-size:12px;color:#666;text-align:center;margin-top:24px;padding-top:24px;border-top:1px solid #1a1a1a}

/* Network banner */
.network-banner{padding:8px 16px;text-align:center;font-size:13px;font-weight:600;letter-spacing:0.5px}
.network-banner-testnet{background:#7c3aed;color:#fff}
.network-banner-signet{background:#2563eb;color:#fff}
.network-banner-regtest{background:#059669;color:#fff}
</style>
</head>
<body>
<!-- NETWORK_BANNER -->

<!-- Header -->
<header class="header">
<div class="container header-inner">
  <a href="/" class="logo-link">
    <svg viewBox="0 0 100 100" style="width:56px;height:56px">
      <polygon points="50,2 93,26 93,74 50,98 7,74 7,26" fill="none" stroke="#f7931a" stroke-width="2" opacity="0.1"/>
      <polygon points="50,8 87,29 87,71 50,92 13,71 13,29" fill="none" stroke="#f7931a" stroke-width="2" opacity="0.2"/>
      <polygon points="50,14 81,32 81,68 50,86 19,68 19,32" fill="none" stroke="#f7931a" stroke-width="2" opacity="0.35"/>
      <polygon points="50,20 75,35 75,65 50,80 25,65 25,35" fill="none" stroke="#f7931a" stroke-width="2" opacity="0.55"/>
      <polygon points="50,26 69,38 69,62 50,74 31,62 31,38" fill="none" stroke="#f7931a" stroke-width="2.5" opacity="0.8"/>
      <text x="50" y="58" text-anchor="middle" font-size="20" font-weight="bold" fill="#f7931a" font-family="Georgia,serif">TX</text>
    </svg>
    <span class="site-name" id="siteName"></span>
  </a>
  <nav>
    <a href="/" class="nav-link"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg><span class="nav-label">Broadcast</span></a>
    <a href="/docs" class="nav-link"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg><span class="nav-label">API Docs</span></a>
    <a href="/status" class="nav-link"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg><span class="nav-label">Status</span></a>
  </nav>
</div>
</header>

<!-- Error Content -->
<div class="error-center">
  <div class="error-card">
    <div class="error-icon">
      <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
    </div>
    <h1 class="error-title">Invalid Request</h1>
    <p class="error-subtitle" id="errorSubtitle">The URL could not be resolved to a valid route.</p>

    <div class="error-box">
      <div class="error-code">Error 404</div>
      <div class="error-message" id="errorMessage">The requested URL is not a valid transaction format.</div>
      <div class="error-detail" id="errorDetail" style="display:none"></div>
    </div>

    <div class="help-section">
      <div class="help-title">How to use this service</div>
      <div class="help-item">
        <div class="help-label">Broadcast a transaction</div>
        <code class="help-code" id="helpBroadcast">https://sendrawtx.com/{raw_tx_hex}</code>
        <div class="help-note">Raw transaction hex must be at least 164 characters (82 bytes)</div>
      </div>
      <div class="help-item">
        <div class="help-label">Check transaction status</div>
        <code class="help-code" id="helpTx">https://sendrawtx.com/tx/{txid}</code>
        <div class="help-note">Transaction ID must be exactly 64 hex characters</div>
      </div>
    </div>

    <a href="/" class="btn btn-muted">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      Back to Home
    </a>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
<div class="container">
  <div class="footer-inner">
    <div>
      <p style="font-size:14px;color:#a0a0a0"><span style="color:#fff;font-weight:500" class="mono" id="footerSiteName"></span> - Bitcoin raw transaction broadcast service</p>
      <p style="font-size:12px;color:#666;margin-top:4px">Specializing in non-standard transactions that other services reject</p>
    </div>
    <div class="footer-links">
      <a href="https://github.com/8144225309/sendrawtx" target="_blank" rel="noopener noreferrer" class="footer-link">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        <span>GitHub</span>
      </a>
      <a href="https://mempool.space" target="_blank" rel="noopener noreferrer" class="footer-link">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        <span>mempool.space</span>
      </a>
    </div>
  </div>
  <div class="footer-credit">Built with Bitcoin Core, Knots, and Libre Relay</div>
</div>
</footer>

<script>
(function() {
  'use strict';

  // Set site names
  var host = window.location.host.replace(/^www\./, '');
  var nameEl = document.getElementById('siteName');
  var footerEl = document.getElementById('footerSiteName');
  if (nameEl) nameEl.textContent = host;
  if (footerEl) footerEl.textContent = host;

  // Update help URLs with actual host
  var helpBroadcast = document.getElementById('helpBroadcast');
  var helpTx = document.getElementById('helpTx');
  var proto = window.location.protocol + '//';
  if (helpBroadcast) helpBroadcast.textContent = proto + host + '/{raw_tx_hex}';
  if (helpTx) helpTx.textContent = proto + host + '/tx/{txid}';

  function analyzeUrl() {
    var path = window.location.pathname.substring(1);
    var msgEl = document.getElementById('errorMessage');
    var detailEl = document.getElementById('errorDetail');
    var subtitleEl = document.getElementById('errorSubtitle');

    if (!path || path === '') {
      msgEl.textContent = 'No transaction data provided.';
      return;
    }

    // Check if this is a /tx/ path with invalid txid
    var isTxPath = path.indexOf('tx/') === 0;
    var hexPart = isTxPath ? path.substring(3) : path;

    // Show the attempted path
    detailEl.textContent = 'Attempted: /' + path;
    detailEl.style.display = 'block';

    // Check for non-hex characters
    if (!/^[0-9a-fA-F]*$/.test(hexPart)) {
      if (isTxPath) {
        msgEl.textContent = 'Invalid transaction ID: contains non-hex characters.';
        subtitleEl.textContent = 'Transaction IDs must contain only hex characters (0-9, a-f).';
      } else {
        msgEl.textContent = 'Invalid characters detected. Only hex characters (0-9, a-f) are allowed.';
        subtitleEl.textContent = 'The path contains characters that are not valid hexadecimal.';
      }
      // Highlight the bad characters
      var badChars = hexPart.replace(/[0-9a-fA-F]/g, '');
      var unique = badChars.split('').filter(function(c, i, a) { return a.indexOf(c) === i; }).join(' ');
      if (unique) {
        detailEl.textContent += '\nInvalid characters: ' + unique;
      }
      return;
    }

    // Check for odd length
    if (hexPart.length % 2 !== 0) {
      if (isTxPath) {
        msgEl.textContent = 'Invalid transaction ID: odd number of characters (' + hexPart.length + ').';
        subtitleEl.textContent = 'Transaction IDs must be exactly 64 hex characters.';
      } else {
        msgEl.textContent = 'Hex string has odd length (' + hexPart.length + ' characters). Must be even for valid hex bytes.';
      }
      return;
    }

    // /tx/ path with wrong length
    if (isTxPath) {
      if (hexPart.length !== 64) {
        msgEl.textContent = 'Invalid transaction ID: wrong length (' + hexPart.length + ' characters).';
        subtitleEl.textContent = 'Transaction IDs must be exactly 64 hex characters (32 bytes).';
        if (hexPart.length < 64) {
          detailEl.textContent += '\nNeed ' + (64 - hexPart.length) + ' more characters.';
        } else {
          detailEl.textContent += '\nHave ' + (hexPart.length - 64) + ' extra characters.';
        }
      }
      return;
    }

    // Too short for either txid or tx
    if (hexPart.length > 0 && hexPart.length < 64) {
      msgEl.textContent = 'Hex string too short (' + hexPart.length + ' characters).';
      subtitleEl.textContent = 'Need at least 64 characters for a transaction ID, or 164+ for a raw transaction.';
      return;
    }

    // Between 64 and 164 (too long for txid, too short for tx)
    if (hexPart.length > 64 && hexPart.length < 164) {
      msgEl.textContent = 'Hex string has ' + hexPart.length + ' characters \u2014 too long for a txid (64) but too short for a raw transaction (164+).';
      subtitleEl.textContent = 'This doesn\'t match any valid route pattern.';
      return;
    }

    // Generic error
    msgEl.textContent = 'The requested URL is not a valid transaction format.';
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', analyzeUrl);
  } else {
    analyzeUrl();
  }
})();
</script>
</body>
</html>
